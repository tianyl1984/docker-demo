
构建镜像命令：
docker build -f Dockerfile.user -t user:v1 .

启动registry服务：
docker pull registry:2
docker run -d -p 5000:5000 --name registry -v /mnt/docker/data/registry:/var/lib/registry registry:2
docker tag user:v1 localhost:5000/user:v1


启动容器：
docker run --name u1 -d -p 8080:8080 user:v1

进入容器：
docker exec -it u1 /bin/bash

Docker Machine使用
https://yeasy.gitbooks.io/docker_practice/machine/usage.html

创建
docker-machine create -d xhyve \
      --xhyve-boot2docker-url ~/.docker/machine/cache/boot2docker.iso \
      --engine-opt dns=114.114.114.114 \
      --engine-registry-mirror https://registry.docker-cn.com \
      test1

查看
docker-machine ls

ssh进入
docker-machine ssh


docker swarm

创建manager节点
docker swarm init

查看节点状态
docker node ls

worker加入
docker swarm join --token SWMTKN-1-5tykvcyovqt8llw8xhx35vxmf63gcw91nhd631epuvkz1x0w9m-3eg2sd3hgwkbzd39g8b6670z0 192.168.64.2:2377

提升node为manager
docker node promote nodeid

创建服务
docker service create --replicas 2 -p 80:80 --name nginx nginx

查看服务
docker service ls

查看服务详情
docker service ps nginx

删除服务
docker service rm nginx


